================================================================================
                    THINKAI DATABASE - HÆ¯á»šNG DáºªN Sá»¬ Dá»¤NG
================================================================================
Cáº­p nháº­t: 2026-01-30
Database: MySQL 8.0
File SQL: database/thinkai_schema.sql
================================================================================

                              Tá»”NG QUAN Cáº¤U TRÃšC
================================================================================

Database ThinkAI gá»“m 15 báº£ng chÃ­nh, Ä‘Æ°á»£c chia theo cÃ¡c module:

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  AUTH MODULE (BÃ¬nh Minh)                                                â”‚
    â”‚  â”œâ”€â”€ users           : ThÃ´ng tin ngÆ°á»i dÃ¹ng (Student/Teacher/Admin)     â”‚
    â”‚  â””â”€â”€ refresh_tokens  : JWT refresh tokens cho authentication            â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚  COURSE MODULE (HoÃ ng Minh)                                             â”‚
    â”‚  â”œâ”€â”€ courses         : KhÃ³a há»c                                         â”‚
    â”‚  â””â”€â”€ enrollments     : ÄÄƒng kÃ½ khÃ³a há»c cá»§a há»c viÃªn                    â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚  LEARNING MODULE (Anh Khoa)                                             â”‚
    â”‚  â”œâ”€â”€ lessons         : BÃ i há»c (Video/PDF)                              â”‚
    â”‚  â””â”€â”€ lesson_progress : Tiáº¿n Ä‘á»™ há»c cá»§a tá»«ng há»c viÃªn                    â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚  AI MODULE (BÃ² Trang)                                                   â”‚
    â”‚  â”œâ”€â”€ ai_chat_logs    : Lá»‹ch sá»­ chat vá»›i AI Tutor                        â”‚
    â”‚  â””â”€â”€ ai_summaries    : TÃ³m táº¯t bÃ i há»c do AI táº¡o                        â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚  EXAM MODULE (Mai PhÃ¡p)                                                 â”‚
    â”‚  â”œâ”€â”€ exams           : BÃ i thi                                          â”‚
    â”‚  â”œâ”€â”€ questions       : CÃ¢u há»i trong bÃ i thi                            â”‚
    â”‚  â”œâ”€â”€ exam_attempts   : Lá»‹ch sá»­ lÃ m bÃ i (Ä‘iá»ƒm, feedback AI)              â”‚
    â”‚  â””â”€â”€ exam_answers    : Chi tiáº¿t cÃ¢u tráº£ lá»i                             â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚  TEACHER MODULE (Trá»ng NghÄ©a)                                           â”‚
    â”‚  â””â”€â”€ (Sá»­ dá»¥ng cÃ¡c báº£ng courses, lessons, exams vá»›i quyá»n Teacher)       â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚  ADMIN MODULE (ThÃ¡i NguyÃªn)                                             â”‚
    â”‚  â”œâ”€â”€ course_reviews  : ÄÃ¡nh giÃ¡ & nháº­n xÃ©t khÃ³a há»c                     â”‚
    â”‚  â”œâ”€â”€ ai_settings     : Cáº¥u hÃ¬nh AI prompts                              â”‚
    â”‚  â””â”€â”€ system_logs     : Log hoáº¡t Ä‘á»™ng há»‡ thá»‘ng                           â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

================================================================================
                           CHI TIáº¾T Tá»ªNG Báº¢NG
================================================================================

1. USERS (NgÆ°á»i dÃ¹ng)
--------------------------------------------------------------------------------
   LÆ°u trá»¯ thÃ´ng tin táº¥t cáº£ ngÆ°á»i dÃ¹ng há»‡ thá»‘ng.

   CÃ¡c cá»™t quan trá»ng:
   - id            : ID tá»± tÄƒng (Primary Key)
   - email         : Email Ä‘Äƒng nháº­p (Unique)
   - password_hash : Máº­t kháº©u Ä‘Ã£ mÃ£ hÃ³a BCrypt
   - role          : STUDENT / TEACHER / ADMIN
   - google_id     : ID tá»« Google OAuth (náº¿u Ä‘Äƒng nháº­p Google)
   - is_active     : TRUE/FALSE (Admin cÃ³ thá»ƒ khÃ³a tÃ i khoáº£n)

   NgÆ°á»i phá»¥ trÃ¡ch: BÃ¬nh Minh

--------------------------------------------------------------------------------

2. REFRESH_TOKENS (Token lÃ m má»›i)
--------------------------------------------------------------------------------
   LÆ°u refresh token Ä‘á»ƒ cáº¥p láº¡i access token khi háº¿t háº¡n.

   CÃ¡c cá»™t quan trá»ng:
   - user_id       : FK â†’ users.id
   - token         : Chuá»—i refresh token (Unique)
   - expires_at    : Thá»i Ä‘iá»ƒm háº¿t háº¡n (7 ngÃ y)

   NgÆ°á»i phá»¥ trÃ¡ch: BÃ¬nh Minh

--------------------------------------------------------------------------------

3. COURSES (KhÃ³a há»c)
--------------------------------------------------------------------------------
   LÆ°u thÃ´ng tin khÃ³a há»c do Teacher táº¡o.

   CÃ¡c cá»™t quan trá»ng:
   - title         : TÃªn khÃ³a há»c
   - description   : MÃ´ táº£ chi tiáº¿t
   - thumbnail_url : URL áº£nh thumbnail
   - price         : GiÃ¡ (VND), 0 = miá»…n phÃ­
   - instructor_id : FK â†’ users.id (Teacher táº¡o khÃ³a há»c)
   - is_published  : ÄÃ£ publish chÆ°a
   - status        : DRAFT / PENDING / APPROVED / REJECTED

   NgÆ°á»i phá»¥ trÃ¡ch: HoÃ ng Minh (Student view), Trá»ng NghÄ©a (Teacher CRUD)

--------------------------------------------------------------------------------

4. LESSONS (BÃ i há»c)
--------------------------------------------------------------------------------
   LÆ°u cÃ¡c bÃ i há»c trong khÃ³a há»c.

   CÃ¡c cá»™t quan trá»ng:
   - course_id     : FK â†’ courses.id
   - title         : TÃªn bÃ i há»c
   - type          : VIDEO / PDF / QUIZ
   - content_url   : URL video hoáº·c PDF
   - content_text  : Ná»™i dung text (dÃ¹ng cho AI context)
   - order_index   : Thá»© tá»± trong khÃ³a há»c

   NgÆ°á»i phá»¥ trÃ¡ch: Anh Khoa (Hiá»ƒn thá»‹), Trá»ng NghÄ©a (Upload)

--------------------------------------------------------------------------------

5. ENROLLMENTS (ÄÄƒng kÃ½ há»c)
--------------------------------------------------------------------------------
   LÆ°u thÃ´ng tin há»c viÃªn Ä‘Äƒng kÃ½ khÃ³a há»c.

   CÃ¡c cá»™t quan trá»ng:
   - user_id          : FK â†’ users.id (Student)
   - course_id        : FK â†’ courses.id
   - progress_percent : Tiáº¿n Ä‘á»™ 0-100%
   - completed_at     : NULL náº¿u chÆ°a hoÃ n thÃ nh

   RÃ ng buá»™c: Má»—i user chá»‰ Ä‘Äƒng kÃ½ 1 láº§n/course (UNIQUE)

   NgÆ°á»i phá»¥ trÃ¡ch: HoÃ ng Minh

--------------------------------------------------------------------------------

6. LESSON_PROGRESS (Tiáº¿n Ä‘á»™ bÃ i há»c)
--------------------------------------------------------------------------------
   Theo dÃµi tiáº¿n Ä‘á»™ há»c tá»«ng bÃ i cá»§a há»c viÃªn.

   CÃ¡c cá»™t quan trá»ng:
   - user_id           : FK â†’ users.id
   - lesson_id         : FK â†’ lessons.id
   - is_completed      : ÄÃ£ hoÃ n thÃ nh chÆ°a
   - watch_time_seconds: Thá»i gian Ä‘Ã£ xem (giÃ¢y)
   - last_accessed_at  : Láº§n truy cáº­p cuá»‘i

   NgÆ°á»i phá»¥ trÃ¡ch: Anh Khoa

--------------------------------------------------------------------------------

7. EXAMS (BÃ i thi)
--------------------------------------------------------------------------------
   LÆ°u thÃ´ng tin bÃ i thi cá»§a khÃ³a há»c.

   CÃ¡c cá»™t quan trá»ng:
   - course_id         : FK â†’ courses.id
   - title             : TÃªn bÃ i thi
   - difficulty        : EASY / MEDIUM / HARD
   - time_limit_minutes: Thá»i gian lÃ m bÃ i (phÃºt)
   - passing_score     : Äiá»ƒm Ä‘áº¡t (%)
   - is_ai_generated   : CÃ³ pháº£i AI táº¡o khÃ´ng
   - created_by        : FK â†’ users.id (Teacher/Admin)

   NgÆ°á»i phá»¥ trÃ¡ch: Mai PhÃ¡p (Student lÃ m bÃ i), Trá»ng NghÄ©a (Teacher táº¡o)

--------------------------------------------------------------------------------

8. QUESTIONS (CÃ¢u há»i)
--------------------------------------------------------------------------------
   LÆ°u cÃ¡c cÃ¢u há»i trong bÃ i thi.

   CÃ¡c cá»™t quan trá»ng:
   - exam_id        : FK â†’ exams.id
   - content        : Ná»™i dung cÃ¢u há»i
   - options        : JSON array ["A", "B", "C", "D"]
   - correct_option : ÄÃ¡p Ã¡n Ä‘Ãºng ("A", "B", "C", "D" hoáº·c "A,B")
   - type           : SINGLE_CHOICE / MULTIPLE_CHOICE
   - explanation    : Giáº£i thÃ­ch Ä‘Ã¡p Ã¡n

   NgÆ°á»i phá»¥ trÃ¡ch: Mai PhÃ¡p, Trá»ng NghÄ©a

--------------------------------------------------------------------------------

9. EXAM_ATTEMPTS (Lá»‹ch sá»­ lÃ m bÃ i)
--------------------------------------------------------------------------------
   LÆ°u má»—i láº§n há»c viÃªn lÃ m bÃ i thi.

   CÃ¡c cá»™t quan trá»ng:
   - user_id         : FK â†’ users.id
   - exam_id         : FK â†’ exams.id
   - score           : Äiá»ƒm sá»‘ (0-100)
   - correct_count   : Sá»‘ cÃ¢u Ä‘Ãºng
   - is_passed       : Äáº¡t/KhÃ´ng Ä‘áº¡t
   - ai_feedback     : Nháº­n xÃ©t tá»« AI
   - started_at      : Báº¯t Ä‘áº§u lÃ m bÃ i
   - submitted_at    : Ná»™p bÃ i

   NgÆ°á»i phá»¥ trÃ¡ch: Mai PhÃ¡p

--------------------------------------------------------------------------------

10. EXAM_ANSWERS (CÃ¢u tráº£ lá»i)
--------------------------------------------------------------------------------
    LÆ°u chi tiáº¿t cÃ¢u tráº£ lá»i cá»§a tá»«ng láº§n thi.

    CÃ¡c cá»™t quan trá»ng:
    - attempt_id     : FK â†’ exam_attempts.id
    - question_id    : FK â†’ questions.id
    - selected_option: ÄÃ¡p Ã¡n Ä‘Ã£ chá»n
    - is_correct     : ÄÃºng/Sai

    NgÆ°á»i phá»¥ trÃ¡ch: Mai PhÃ¡p

--------------------------------------------------------------------------------

11. AI_CHAT_LOGS (Log chat AI)
--------------------------------------------------------------------------------
    LÆ°u lá»‹ch sá»­ há»™i thoáº¡i vá»›i AI Tutor.

    CÃ¡c cá»™t quan trá»ng:
    - user_id        : FK â†’ users.id
    - course_id      : FK â†’ courses.id (context)
    - lesson_id      : FK â†’ lessons.id (context)
    - user_message   : CÃ¢u há»i cá»§a user
    - ai_response    : CÃ¢u tráº£ lá»i AI
    - citations      : JSON array nguá»“n trÃ­ch dáº«n
    - response_time_ms: Thá»i gian pháº£n há»“i (ms)

    NgÆ°á»i phá»¥ trÃ¡ch: BÃ² Trang

--------------------------------------------------------------------------------

12. AI_SUMMARIES (TÃ³m táº¯t AI)
--------------------------------------------------------------------------------
    LÆ°u cÃ¡c báº£n tÃ³m táº¯t bÃ i há»c do AI táº¡o.

    CÃ¡c cá»™t quan trá»ng:
    - lesson_id      : FK â†’ lessons.id
    - summary_text   : Ná»™i dung tÃ³m táº¯t (Markdown)
    - key_points     : JSON array cÃ¡c Ä‘iá»ƒm chÃ­nh
    - generated_by   : FK â†’ users.id (User yÃªu cáº§u)

    NgÆ°á»i phá»¥ trÃ¡ch: BÃ² Trang

--------------------------------------------------------------------------------

13. COURSE_REVIEWS (ÄÃ¡nh giÃ¡ khÃ³a há»c)
--------------------------------------------------------------------------------
    LÆ°u Ä‘Ã¡nh giÃ¡ vÃ  nháº­n xÃ©t cá»§a há»c viÃªn vá» khÃ³a há»c.

    CÃ¡c cá»™t quan trá»ng:
    - course_id      : FK â†’ courses.id
    - user_id        : FK â†’ users.id
    - rating         : 1-5 sao
    - review_text    : Ná»™i dung nháº­n xÃ©t
    - is_approved    : Admin duyá»‡t chÆ°a

    RÃ ng buá»™c: Má»—i user chá»‰ review 1 láº§n/course

    NgÆ°á»i phá»¥ trÃ¡ch: ThÃ¡i NguyÃªn

--------------------------------------------------------------------------------

14. AI_SETTINGS (Cáº¥u hÃ¬nh AI)
--------------------------------------------------------------------------------
    LÆ°u cÃ¡c prompt cáº¥u hÃ¬nh cho AI (Admin quáº£n lÃ½).

    CÃ¡c setting máº·c Ä‘á»‹nh:
    - TUTOR_SYSTEM_PROMPT    : System prompt cho AI Tutor
    - EXAM_GENERATOR_PROMPT  : Prompt táº¡o Ä‘á» thi
    - SUMMARY_PROMPT         : Prompt tÃ³m táº¯t bÃ i há»c
    - FEEDBACK_PROMPT        : Prompt feedback káº¿t quáº£ thi

    NgÆ°á»i phá»¥ trÃ¡ch: ThÃ¡i NguyÃªn

--------------------------------------------------------------------------------

15. SYSTEM_LOGS (Log há»‡ thá»‘ng)
--------------------------------------------------------------------------------
    LÆ°u log cÃ¡c hoáº¡t Ä‘á»™ng quan trá»ng (audit trail).

    CÃ¡c cá»™t quan trá»ng:
    - user_id        : FK â†’ users.id
    - action         : HÃ nh Ä‘á»™ng (LOGIN, CREATE, UPDATE, DELETE)
    - entity_type    : Loáº¡i entity (users, courses, exams...)
    - entity_id      : ID cá»§a entity
    - details        : JSON chi tiáº¿t
    - ip_address     : Äá»‹a chá»‰ IP

    NgÆ°á»i phá»¥ trÃ¡ch: ThÃ¡i NguyÃªn

================================================================================
                              CÃC VIEW THá»NG KÃŠ
================================================================================

1. v_course_stats
   â†’ Thá»‘ng kÃª sá»‘ há»c viÃªn, sá»‘ bÃ i há»c, rating trung bÃ¬nh cá»§a khÃ³a há»c

2. v_student_dashboard  
   â†’ Thá»‘ng kÃª tá»•ng khÃ³a há»c, tiáº¿n Ä‘á»™ trung bÃ¬nh, sá»‘ bÃ i thi Ä‘Ã£ lÃ m

3. v_teacher_dashboard
   â†’ Thá»‘ng kÃª sá»‘ khÃ³a há»c, tá»•ng há»c viÃªn, tá»•ng bÃ i há»c, bÃ i thi

4. v_admin_dashboard
   â†’ Thá»‘ng kÃª toÃ n há»‡ thá»‘ng (users, courses, enrollments, AI chats today)

================================================================================
                           CÃCH Sá»¬ Dá»¤NG SQL FILE
================================================================================

1. Má»Ÿ MySQL Workbench hoáº·c terminal MySQL

2. Cháº¡y lá»‡nh:
   mysql -u root -p < database/thinkai_schema.sql

3. Hoáº·c trong MySQL Workbench:
   - File â†’ Open SQL Script â†’ chá»n thinkai_schema.sql
   - Nháº¥n Execute (âš¡)

4. Kiá»ƒm tra:
   USE thinkai_db;
   SHOW TABLES;

================================================================================
                           TÃ€I KHOáº¢N TEST Máº¶C Äá»ŠNH
================================================================================

    | Email               | Password     | Role    |
    |---------------------|--------------|---------|
    | admin@thinkai.com   | Admin@123    | ADMIN   |
    | teacher@thinkai.com | Teacher@123  | TEACHER |
    | student@thinkai.com | Student@123  | STUDENT |

    LÆ°u Ã½: Password trong database Ä‘Ã£ Ä‘Æ°á»£c hash BCrypt!

================================================================================
                              LÆ¯U Ã QUAN TRá»ŒNG
================================================================================

    â˜… Charset: utf8mb4 (há»— trá»£ emoji vÃ  tiáº¿ng Viá»‡t Ä‘áº§y Ä‘á»§)
    â˜… Engine: InnoDB (há»— trá»£ transaction vÃ  foreign key)
    â˜… Foreign Key: ON DELETE CASCADE hoáº·c SET NULL tÃ¹y logic
    â˜… Index: ÄÃ£ táº¡o sáºµn index cho cÃ¡c trÆ°á»ng thÆ°á»ng query
    â˜… FULLTEXT: Báº£ng courses cÃ³ fulltext index cho search

================================================================================
                           LIÃŠN Há»† Há»– TRá»¢
================================================================================

    - Auth/Users     : BÃ¬nh Minh
    - Courses        : HoÃ ng Minh  
    - Learning       : Anh Khoa
    - AI Features    : BÃ² Trang
    - Exams          : Mai PhÃ¡p
    - Teacher Portal : Trá»ng NghÄ©a
    - Admin Panel    : ThÃ¡i NguyÃªn

================================================================================
                              GOOD LUCK! ğŸš€
================================================================================
